##############################################################
# Rename the file extension to "._yaml" (remove "_") to enable
##############################################################

name:  Build Stochastic_Physics Unit Test Images (Docker) 

on:
  # run it on push to the default repository branch
  push:
    branches: [feature/dockerfile]

jobs:
  build:
    runs-on: ubuntu-latest
    name: Build Docker Stochastic_Physics Unit Test Image .......
    steps:
      - uses: actions/checkout@v3        
      - name: docker build stochastic_physics unit test image
        run: | 
         echo "docker build stochastic_physics unit test image"
         docker build -t stochastic_physics_test --no-cache --compress -f ./unit_tests/Dockerfile .
      - name: docker run stochastic_physics unit test image
        run: | 
         echo "docker build stochastic_physics unit test image"
         docker volume rm -f DataVolume
         docker run -d --rm -v DataVolume:/tmp ufscommunity/input-data:stochastic        
         docker run --rm -v DataVolume:/tmp -i --shm-size=1gb stochastic_physics_test


